<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Checkout</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
</head>
<body class="container py-5">

  <h2 class="mb-4">Checkout</h2>
<div class="container py-5">
  <h2>Your Cart</h2>
  <table class="table table-bordered">
    <thead>
      <tr>
        <th>Name</th>
        <th>Description</th>
        <th>Qty</th>
        <th>Price</th>
        <th>Total</th>
      </tr>
    </thead>
    <tbody id="cartTable"></tbody>
  </table>
  <h4 id="grandTotal"></h4>
</div>

<script>
  let cart = JSON.parse(localStorage.getItem("cart")) || [];
  let table = document.getElementById("cartTable");
  let total = 0;

  cart.forEach(item => {
    let row = `<tr>
      <td>${item.title}</td>
      <td>${item.desc}</td>
      <td>${item.qty}</td>
      <td>₹${item.price}</td>
      <td>₹${item.price * item.qty}</td>
    </tr>`;
    table.innerHTML += row;
    total += item.price * item.qty;
  });

  document.getElementById("grandTotal").innerText = "Grand Total: ₹" + total;
  // Buy Now for single product
document.getElementById("buyNow").addEventListener("click", function () {
  let title = document.getElementById("productTitle").innerText;
  let price = parseInt(document.getElementById("productPrice").innerText) * 100; // convert to paise

  var options = {
    "key": "rzp_test_yourapikeyhere", // Replace with your Razorpay Test Key
    "amount": price,
    "currency": "INR",
    "name": "My Store",
    "description": title,
    "image": "https://yourdomain.com/logo.png", // optional
    "handler": function (response) {
      alert("Payment Successful for " + title + "! Payment ID: " + response.razorpay_payment_id);

      // close modal after success
      var productModalEl = document.getElementById('productModal');
      var modal = bootstrap.Modal.getInstance(productModalEl);
      modal.hide();
    },
    "prefill": {
      "name": "Your Name",
      "email": "customer@example.com",
      "contact": "9999999999"
    },
    "theme": {
      "color": "#3399cc"
    }
  };

  var rzp2 = new Razorpay(options);
  rzp2.open();
});

</script>

</body>
</html>
