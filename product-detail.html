<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Product Detail</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
</head>
<body class="container py-5">

  <div id="product-detail" class="text-center"></div>

  <script src="products.js"></script>
  <script>
    // Get product ID from URL
    const params = new URLSearchParams(window.location.search);
    const productId = params.get("id");
    const product = products.find(p => p.id == productId);

    const detailDiv = document.getElementById("product-detail");
    detailDiv.innerHTML = `
      <div class="card shadow p-4">
        <img src="${product.img}" class="img-fluid mb-3" style="max-width:300px">
        <h2>${product.title}</h2>
        <p>${product.desc}</p>
        <h4>â‚¹${product.price}</h4>
        <button class="btn btn-success me-2" id="addToCart">Add to Cart</button>
        <button class="btn btn-primary" id="buyNow">Buy Now</button>
      </div>
    `;

    // Add to Cart
    document.getElementById("addToCart").addEventListener("click", () => {
      let cart = JSON.parse(localStorage.getItem("cart")) || [];
      cart.push(product);
      localStorage.setItem("cart", JSON.stringify(cart));
      window.location.href = "cart.html"; // Redirect to cart page
    });

    // Buy Now
    document.getElementById("buyNow").addEventListener("click", () => {
      var options = {
        key: "rzp_test_1234567890", // Replace with your Razorpay Key
        amount: product.price * 100, // in paise
        currency: "INR",
        name: "My E-Commerce",
        description: product.title,
        handler: function (response) {
          alert("Payment Successful! Payment ID: " + response.razorpay_payment_id);
        },
        prefill: {
          name: "Customer",
          email: "customer@example.com",
          contact: "9999999999"
        },
        theme: {
          color: "#3399cc"
        }
      };
      var rzp1 = new Razorpay(options);
      rzp1.open();
    });
  </script>

</body>
</html>
